---
title: "Relatório 3 - capítulos 6 a 9 do livro"
author: "Christiano Rossini Martins Costa"
output: html_notebook
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

Atividade: Relatório dos capítulos 6 a 9 do livro:

1. Estudar as técnicas Regression Methods, Black Box Methods (Support Vector Machines) e k-means. 
2. Escolher 3 datasets diferentes e avaliar a efetividade destas técnicas em termos de Recall, Precision, F-measure, Markedness e Informedness. 
3. Discutir os resultados.


# 1.Desenvolvendo análise de efetividade com Linear Regression

* Dataset "Titanic"
* Objetivo: dado um conjunto de informções de cada passageiro do naufrágio do navio, fazer predição de sobreviventes
* Atributo alvo: survived


## 1.1 Amostra do dataset  
```{r}
source(file = "../mlAlgorithms.R")

test <- read.csv("/home/christiano/Dropbox/trabalhos/disciplina_mineracao/datasets/datasets_menores/titanic/test.csv", stringsAsFactors = FALSE)
gender_submission <- read.csv("/home/christiano/Dropbox/trabalhos/disciplina_mineracao/datasets/datasets_menores/titanic/gender_submission.csv", stringsAsFactors = FALSE)
train <- read.csv("/home/christiano/Dropbox/trabalhos/disciplina_mineracao/datasets/datasets_menores/titanic/train.csv", stringsAsFactors = FALSE)

test$Pclass <- as.factor(test$Pclass)
test$Sex <- as.factor(test$Sex)
test$Embarked <- as.factor(test$Embarked)
train$Pclass <- as.factor(train$Pclass)
train$Sex <- as.factor(train$Sex)
train$Embarked <- as.factor(train$Embarked)

survived <- train[,1:2]
survived <- rbind(survived, gender_submission)
survived <- survived[,-1]

# retira o atributo alvo
dataset <- train[,-2]

#junta o dataset train com o test
dataset <- rbind(dataset,test)
#insere o atributo alvo no fim do dataset
dataset <- cbind(dataset,survived=survived)

dataset

```

```{r}
summary(dataset)
```

```{r}


```


## 1.2 Transformações e preparação dos dados

```{r}

#retira atributos de natureza única: passengerId, name, ticket,
dataset <- dataset[,c(-1,-3,-8)]
#atributo cabin tem muitos valores nulos. será excluído também
dataset <- dataset[,-7]

# atribui a média para atributos com células vazias
dataset[is.na(dataset$Age),]$Age <- median(dataset$Age, na.rm = TRUE)
dataset[is.na(dataset$Fare),]$Fare <- median(dataset$Fare, na.rm = TRUE)
#atribui a categoria de maior frequencia aos campos vazios em Embarked
dataset[dataset$Embarked=='',]$Embarked <- 'S'

summary(dataset)
```

## 1.3 Análise de efetividade
```{r}

set.seed(3)
folds <- createFolds(dataset$survived, k =5)

lm_efetividade_by_fold <- executeLm(dataset=dataset, folds = folds)
lm_efetividade_by_fold <- as.data.frame(lm_efetividade_by_fold)

lm_efetividade <- rowMeans(lm_efetividade_by_fold)
lm_efetividade <- as.data.frame(lm_efetividade)
rownames(lm_efetividade) <- c("precision","recall","f-measure","infomedness","markdness")

lm_efetividade
```

## 1.4 Discussão dos resultados



# 2.Desenvolvendo análise de efetividade com Support Vector Machines

* Dataset "Titanic"
* Objetivo: dado um conjunto de informções de cada passageiro do naufrágio do navio, fazer predição de sobreviventes
* Atributo alvo: survived





